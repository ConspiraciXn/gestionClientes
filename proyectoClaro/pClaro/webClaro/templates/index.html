{% extends "base.html" %}
{% load static %}

<!-- 
	
PENDIENTES

  [ ] Implementar funciones en página de perfil: cambiar imagen de perfil, constantes de valores, etc.
  [ ] Idear sistema de reconocimientos.
  [ ] Crear sistema de filtros en búsqueda de clientes index.
  [ ] Formulario modificacion cliente reparar comentarios y fecha.
  [ ] Formulario registro cliente formato RUT, teléfono automáticos.
  [ ] Poblar tabla de comunas.

 -->

{% block contenido %}

<p class="text-danger fw-bold">{{mensaje}}</p>

<h1 class="h3 mb-3"><strong>Clientes</strong> Registrados</h1>

<div class="row">
	<div class="col-xl-6 col-xxl-5 d-flex">
		<div class="w-100">
			<div class="row">

				<div class="col-sm-6">
					<div>
						<div class="text-center mb-3">
							<a class="btn btn-lg btn-success" href="{% url 'registroCliente' %}"><i data-feather="plus"></i> Registrar nuevo cliente</a>
						</div>
					</div>
				</div>

				<div class="col-sm-6">
					<div class="card">
						<div class="card-body">
							<div class="row">
								<div class="col mt-0">
									<h5 class="card-title">Ventas</h5>
								</div>
								<div class="col-auto">
									<div class="stat text-primary">
										<i data-feather="plus"></i>
									</div>
								</div>
							</div>
							<h1 class="mt-1 mb-3">{{cantClientes}}</h1>
							<div class="mb-0">
								<span class="text-muted">Total ventas</span>
							</div>
						</div>
					</div>
				</div>

			</div>
			<div class="row">

				<div class="col-sm-6">
					<div class="card">
						<div class="card-body">
							<div class="row">
								<div class="col mt-0">
									<h5 class="card-title">Decos</h5>
								</div>
								<div class="col-auto">
									<div class="stat text-primary">
										<i data-feather="tv"></i>
									</div>
								</div>
							</div>
							<h1 class="mt-1 mb-3">{{cantDecos}}</h1>
							<div class="mb-0">
								<span class="text-muted">Total decos vendidos</span>
							</div>
						</div>
					</div>
				</div>

				<div class="col-sm-6">
					<div class="card">
						<div class="card-body">
							<div class="row">
								<div class="col mt-0">
									<h5 class="card-title">BAFIs</h5>
								</div>
								<div class="col-auto">
									<div class="stat text-primary">
										<i data-feather="globe"></i>
									</div>
								</div>
							</div>
							<h1 class="mt-1 mb-3">{{cantBafis}}</h1>
							<div class="mb-0">
								<span class="text-muted">Total BAFIs vendidos</span>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>

	<!-- Tarjeta #5 -->
	<div class="col-xl-6 col-xxl-7">
	</div>
</div>

<div class="row">
	<div class="col-12 col-lg-12 col-xxl-12 d-flex">
		<div class="card flex-fill">
			<div class="card-header">

				<h5 class="card-title mb-0">Clientes registrados</h5>
			</div>
			<table class="table table-hover my-0">
				<thead>
					<tr>
						<th>Nombre</th>
						<th class="d-none d-xl-table-cell">RUT</th>
						<th class="d-none d-xl-table-cell">Servicio</th>
						<th class="d-none d-xl-table-cell">Comuna</th>
						<th>Estado</th>
						<th>Acciones</th>
					</tr>
				</thead>
				<tbody>
					{% for reg in clientes %}
					<tr>
						<td>{{reg.nombre}}</td>
						<td class="d-none d-xl-table-cell">{{reg.rut}}</td>
						<td class="d-none d-xl-table-cell">{{reg.servicioTecnologia}}</td>
						<td class="d-none d-md-table-cell">{{reg.Comuna.nombre}}</span></td>
						<td><span class="badge rounded-pill {% if reg.estado == "Instalado"  %}bg-success">{% endif %}{% if reg.estado == "Otro"  %}bg-primary">{% endif %}{% if reg.estado == "Pendiente"  %}bg-warning">{% endif %}{% if reg.estado == "Cancelado"  %}bg-danger">{% endif %}{{reg.estado}}</td>
						<td>
							<a class="btn btn-primary" href="/cliente/{{reg.id}}"><i data-feather="eye"></i> Ver ficha</a>
						</td>
					</tr>
					{% endfor %}					
				</tbody>
			</table>
		</div>
	</div>

</div>
{% endblock contenido %}